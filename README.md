# Electron Certificate Pinning Demo

This project provides a minimal Electron application that fetches data from a local server at `https://192.168.1.21`. It automatically pins the server's certificate on first run so that subsequent requests trust the selfâ€‘signed certificate.

## Running the app

1. Install dependencies:
   ```bash
   npm install
   ```
2. Start the application:
   ```bash
   npm start
   ```

When launched for the first time, the app connects to the server without validating its certificate, retrieves the certificate and stores it as `pinned_cert.pem` in Electron's user data directory. It then requests the server again, trusting only the pinned certificate and displays the returned message.

On later runs the stored `pinned_cert.pem` is used directly. If the server's certificate changes, the app will fail to connect until the stored file is removed so a new one can be fetched.

## Providing your own certificate

If you prefer to supply the certificate manually, copy the server's certificate file (generated by `mkcert`) to the following location on the machine running the app:

```
<user data directory>/pinned_cert.pem
```

To find the user data directory path, run the app once; the path will be printed in the console. Replace the file if you regenerate the certificate on the server.

On your Orange Pi server using `mkcert`, certificates are typically stored under `~/.local/share/mkcert`. Locate the file matching your server's IP (e.g. `192.168.1.21.pem`) and copy it to the client machine.

## Expected server response

The application expects the server to respond with JSON similar to:

```json
{"message":"Function called successfully! Yeaaaah"}
```

Any errors encountered during the request will be displayed in the application window.
